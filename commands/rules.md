---
name: tk:rules
description: Set global rules for all TK agents
allowed-tools:
  - Read
  - Write
  - Edit
---

$arguments

# /tk:rules

Set global rules that ALL TK agents must follow.

## Usage

```
/tk:rules                    # Interactive: ask questions, generate rules
/tk:rules add <rule>         # Add a single rule
/tk:rules list               # Show current rules
/tk:rules reset              # Reset to defaults
```

## Interactive Mode

When run without arguments, ask the user about their preferences:

```
QUESTIONS TO ASK:

1. Code Style
   - Use emojis in output? (default: no)
   - Preferred comment style? (minimal / moderate / verbose)
   
2. Implementation Rules
   - Allow placeholder code like "// TODO: implement"? (default: no)
   - Allow console.log/print statements? (default: remove in production code)
   - Require error handling for all async operations? (default: yes)

3. UI/UX Rules (if frontend)
   - Allow browser alert/confirm/prompt popups? (default: no)
   - Require loading states for async actions? (default: yes)
   - Require error feedback for failed actions? (default: yes)

4. Testing Rules
   - Require tests for new functions? (default: yes for medium/heavy)
   - Minimum test coverage expectation? (none / basic / comprehensive)

5. Git Rules
   - Commit message format? (conventional / freeform)
   - Auto-commit after changes? (ask / yes / no)

6. Custom Rules
   - Any other rules to add? (freeform input)
```

## Generate Rules File

After gathering preferences, create `.tk/RULES.md`:

```markdown
# TK Rules

These rules apply to ALL TK agents and operations.

## Code Style
- [ ] No emojis in code comments or output
- [ ] Use minimal comments - code should be self-documenting

## Implementation
- [ ] No placeholder code (TODO, FIXME, "implement later")
- [ ] No console.log/print in production code
- [ ] All async operations must have error handling
- [ ] No hardcoded secrets or API keys

## UI/UX
- [ ] No browser alert(), confirm(), or prompt() popups
- [ ] All async actions must show loading state
- [ ] All errors must show user-friendly feedback
- [ ] No infinite spinners - always have timeout/fallback

## Testing
- [ ] New functions require at least one test
- [ ] Tests must cover happy path and one error case

## Git
- [ ] Use conventional commit format (feat:, fix:, etc.)
- [ ] Ask before committing

## Custom Rules
- [user-defined rules go here]

---
*Generated by /tk:rules - Edit directly or run /tk:rules to regenerate*
```

## Add Single Rule

```
/tk:rules add Never use inline styles in React components
```

Appends to Custom Rules section in `.tk/RULES.md`.

## List Rules

```
/tk:rules list
```

Reads and displays current `.tk/RULES.md`.

## Reset Rules

```
/tk:rules reset
```

Regenerates `.tk/RULES.md` with defaults, preserving custom rules in a backup.

## Default Rules (Always Applied)

Even without a RULES.md file, these defaults apply:

```
DEFAULTS:
- No placeholder code
- No hardcoded secrets
- Error handling required for async
- No browser popups (alert/confirm/prompt)
```

## Rules File Location

```
.tk/
└── RULES.md    # Project-specific rules
```

Or global rules at:
```
~/.claude/tk-rules.md    # Apply to all projects
```

Project rules override global rules.
